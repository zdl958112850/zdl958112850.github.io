import{_ as n,c as s,o as a,a as p}from"./app.d4eb32af.js";const m='{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"font-end/\u6784\u5EFA\u5DE5\u5177/gulp/index.md"}',t={},o=p(`<ol><li><p>\u5168\u5C40\u5B89\u88C5 gulp cnpm i gulp -g</p></li><li><p>\u521B\u5EFA package npm init -y</p></li><li><p>\u521B\u5EFA gulpfiles.js</p></li><li><p>\u672C\u5730\u5B89\u88C5 gulp cnpm i gulp -D</p></li><li><p>\u5E38\u7528 api</p></li></ol><ul><li>gulp.task() \u8BED\u6CD5: gulp.task(\u4EFB\u52A1\u540D\u79F0, \u4EFB\u52A1\u5904\u7406\u51FD\u6570) \u4F8B\u5B50:</li></ul><div class="language-js"><pre><code>gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&quot;htmlHandler&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>gulp.src() \u8BED\u6CD5: gulp.src(\u8DEF\u5F84\u4FE1\u606F) =&gt;\u4F5C\u7528\uFF1A\u627E\u5230\u6E90\u6587\u4EF6 =&gt;\u4E66\u5199\u65B9\u5F0F 2-1.gulp.src\uFF08./a/b.htm1\uFF09 -&gt;\u627E\u5230\u6307\u5B9A\u4E00\u4E2A\u6587\u4EF6 2-2.gulp.src\uFF08&#39;./a/*.html&#39;\uFF09 <blockquote><p>\u627E\u5230\u6307\u5B9A\u76EE\u5F55\u4E0B\uFF0C\u6307\u5B9A\u540E\u7F00\u7684\u6587\u4EF6 2-3.gulp.src\uFF08&#39;./a/<strong>\u2019\uFF09 \u627E\u5230\u6307\u4EE4\u76EE\u5F55\u4E0B\u7684\u6240\u6709\u6587\u4EF6 2-4.gulp.src\uFF08&#39;./a/</strong>/<em>1\uFF09 -&gt;\u627E\u5230 a \u76EE\u5F55\u4E0B\u6240\u6709\u5B50\u76EE\u5F55\u91CC\u9762\u7684\u6240\u6709\u6587\u4EF6 2-5.gulp.src\uFF08&#39;./a/**/</em>.html\u2019\uFF09 -&gt;\u627E\u5230 a \u76EE\u5F55\u4E0B\u6240\u6709\u5B50\u76EE\u5F55\u91CC\u9762\u7684\u6240\u6709.html \u6587\u4EF6</p></blockquote></li><li>gulp.dest\uFF08\uFF09 =&gt;\u8BED\u6CD5\uFF1Agulp.dest\uFF08\u8DEF\u5F84\u4FE1\u606F\uFF09 =&gt;\u4F5C\u7528\uFF1A\u628A\u4E00\u4E2A\u5185\u5BB9\u653E\u5165\u6307\u5B9A\u76EE\u5F55\u5185 =&gt;\u4F8B\u5B50\uFF1Agulp.dest\uFF08&#39;./abc&#39;\uFF09 -&gt;\u628A\u4ED6\u63A5\u6536\u5230\u7684\u5185\u5BB9\u653E\u5230 abc \u76EE\u5F55\u4E0B</li><li>gulp.watch\uFF08\uFF09 =&gt;\u8BED\u6CD5\uFF1Agulp.watch\uFF08\u8DEF\u5F84\u4FE1\u606F\uFF0C\u4EFB\u52A1\u540D\u79F0\uFF09 =&gt;\u4F5C\u7528\uFF1A\u76D1\u63A7\u6307\u5B9A\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\uFF0C\u4E00\u65E6\u53D1\u751F\u53D8\u5316\uFF0C\u4ECE\u65B0\u6267\u884C\u540E\u9762\u7684\u4EFB\u52A1 =&gt;\u4F8B\u5B50:gulp.watch(&#39;./src/pages/*.html&#39;,htmlHandler) -&gt;\u5F53\u6307\u5B9A\u76EE\u5F55\u4E0B\u7684 html \u6587\u4EF6\u53D1\u751F\u53D8\u5316,\u5C31\u4F1A\u6267\u884C htmlHandler \u8FD9\u4E2A\u4EFB\u52A1</li><li>gulp.series\uFF08\uFF09 =&gt;\u8BED\u6CD5\uFF1Agulp.series\uFF08\u4EFB\u52A1 1\uFF0C\u4EFB\u52A1 2\uFF0C\u4EFB\u52A1 3\uFF0C.\u2026\uFF09 =&gt;\u4F5C\u7528\uFF1A\u9010\u4E2A\u6267\u884C\u591A\u4E2A\u4EFB\u52A1\uFF0C\u524D\u4E00\u4E2A\u4EFB\u52A1\u7ED3\u675F\uFF0C\u7B2C\u4E8C\u4E2A\u4EFB\u52A1\u5F00\u59CB</li><li>gulp.parallel\uFF08\uFF09 =&gt;\u8BED\u6CD5\uFF1Agulp.parallel\uFF08\u4EFB\u52A1 1\uFF0C\u4EFB\u52A1 2\uFF0C\u4EFB\u52A1 3\uFF0C.\uFF09 =&gt;\u4F5C\u7528\uFF1A\u5E76\u884C\u5F00\u59CB\u591A\u4E2A\u4EFB\u52A1</li><li>pipe\uFF08\uFF09 =&gt;\u7BA1\u9053\u51FD\u6570 =&gt;\u6240\u6709\u7684 gulpAPI \u90FD\u662F\u57FA\u4E8E\u6D41 =&gt;\u63A5\u6536\u5F53\u524D\u6D41\uFF0C\u8FDB\u5165\u4E0B\u4E00\u4E2A\u6D41\u8FC7\u7A0B\u7684\u7BA1\u9053\u51FD\u6570 gulp.src().pipe(\u538B\u7F29\u4EFB\u52A1).pipe(\u8F6C\u7801)</li></ul><ol start="6"><li>\u4F8B\u5B50</li></ol><div class="language-js"><pre><code><span class="token keyword">const</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="7"><li>\u5E38\u7528\u63D2\u4EF6</li></ol><ul><li><p>gulp-cssmin</p><p>\u4E0B\u8F7D: cnpm i gulp-cssmin -D</p></li><li><p>gulp-autoprefixer =&gt;\u4E0B\u8F7D:npm i gulp-autoprefixer -D =&gt;\u5BFC\u5165:const autoprefixer=require(&quot;)</p></li><li><p>gulp-sass =&gt;\u4E0B\u8F7D:npm i gulp-sass -D -\u3009</p></li><li><p>gulp-babel =&gt;\u4E13\u95E8\u8FDB\u884C ES6 \u8F6C ES5 \u7684\u63D2\u4EF6 =&gt;gulp-babe1 \u7684\u7248\u672C -&gt;gulp-babe107\uFF1A\u5927\u90E8\u5206\u4F7F\u7528\u518D gulp@3 \u91CC\u9762 -&gt;gulp-babe108\uFF1A\u5927\u90E8\u5206\u4F7F\u7528\u518D gulp@4 \u91CC\u9762 -&gt;\u53E6\u5916\u4E24\u4E2A\u5305:@babe1/core @babel/preset-env -&gt;\u53EA\u8981\u5BFC\u5165\u4E00\u4E2A\u5305\u5C31\u591F\u4E86\uFF0C\u4ED6\u4F1A\u81EA\u52A8\u5BFC\u5165\u53E6\u5916\u4E24\u4E2A -&gt;const babel=require\uFF08&#39;gulp-babel&#39;\uFF09|</p></li><li><p>gulp-htmlmin</p></li></ul><div class="language-js"><pre><code><span class="token comment">//\u9700\u8981\u6355\u83B7\u5230\u8BE5\u4EFB\u52A1\u7684\u7ED3\u675F\uFF0C\u9700\u8981\u628A\u8FD9\u4E2A\u6D41 return\u51FA\u53BB</span>
<span class="token comment">//task \u5C31\u4F1A\u5904\u7406\u6D41 </span>
<span class="token comment">// gulp@4</span>
<span class="token keyword">const</span> autoPrefixer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-autoprefixer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-sass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> uglify<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-uglify&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> babel <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;gulp-babel&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> htmlmin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;gulp-htmlmin&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">cssHandler</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp
    <span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;./src/css/*.css&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pepe</span><span class="token punctuation">(</span>
      <span class="token function">autoPrefixer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">browers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// \u517C\u5BB9\u6700\u8FD1\u4E24\u4E2A\u7248\u672C\u7684\u6D4F\u89C8\u5668</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">cssmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//1-2.\u538B\u7F29\u6587\u4EF6</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;./dist/css/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//1-2.\u521B\u5EFA\u4E00\u4E2A\u6253\u5305sass \u6587\u4EF6\u7684\u5728\u52A1</span>
<span class="token keyword">const</span> <span class="token function-variable function">sassHandler</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> gulp
    <span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&#39;./src/sass/*.scss&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">sass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">\xB7pipe</span><span class="token punctuation">(</span><span class="token function">autoprefixer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">cssmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;./dist/sass/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//1-3.\u521B\u5EFA\u4E00\u4E2A\u6253\u5305js\u6587\u4EF6\u7684\u5728\u52A1, \u4E0D\u80FD\u538B\u7F29es6\u8BED\u6CD5, \u9700\u8981\u5148\u8F6C\u4E3Aes5</span>
<span class="token keyword">const</span> <span class="token function-variable function">jsHandler</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> gulp
        <span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;./src/js/*.js&quot;</span><span class="token punctuation">)</span><span class="token comment">//1.\u9F99\u5230js\u6587\u4EF6</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@babel/env&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">\xB7pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&#39;./dist/js/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//1-4.\u521B\u5EFA\u4E00\u4E2A\u6253\u5305html\u6587\u4EF6\u7684\u5728\u52A1</span>
<span class="token keyword">const</span> <span class="token function-variable function">htmlHandler</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> gulp
    <span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&#39;./src/pages/*.htm1&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">htmlmin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">collapseWhitespace</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u79FB\u9664\u7A7A\u683C</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;./dist/pages/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>cssHandler <span class="token operator">=</span> cssHandler<span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>sassHandler <span class="token operator">=</span> sassHandler<span class="token punctuation">;</span>

<span class="token comment">// \u914D\u7F6E\u4E00\u4E2A\u9ED8\u8BA4\u5728\u52A1</span>
<span class="token comment">//\u9ED8\u8BA4\u5728\u52A1\u7684\u4F5C\u7528\u5C31\u662F\u628A\u6240\u6709\u7684\u5728\u52A1\u7ED9\u6211\u4E00\u8D77\u6267\u884C\u4E86</span>
<span class="token comment">//\u8981\u5417\u4F7F\u7528gulp.sertes\uFF08\uFF09\uFF0C\u8981\u5417\u4F7F\u7528\u7528gulp.paralLel\uFF08\uFF09</span>
<span class="token comment">//\u65B9\u5F0F1:</span>
<span class="token comment">// gulp.task(&#39;default&#39;,()=&gt;(})</span>
<span class="token comment">//\u65B9\u5F0F2:</span>
<span class="token comment">// module.exports.default=()=&gt;f}</span>
<span class="token keyword">const</span> res<span class="token operator">=</span>gulp<span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span>cssHandler<span class="token punctuation">,</span>sassHandler<span class="token punctuation">,</span>jsHandler<span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>default <span class="token operator">=</span> res<span class="token punctuation">;</span>



</code></pre></div><p>\u4FEE\u6539\u5199\u517C\u5BB9\u7248\u672C\u4F4D\u7F6E</p><div class="language-json"><pre><code><span class="token property">&quot;browserslist&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token string">&quot;last 2 versions&quot;</span>
<span class="token punctuation">]</span>
</code></pre></div><p>gulp\u914D\u7F6E\u4EE3\u7406</p><div class="language-js"><pre><code><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;gulp&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> webserver <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;gulp-webserver&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;webserver&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&#39;./&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">webserver</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8888</span><span class="token punctuation">,</span>
      <span class="token literal-property property">livereload</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u5B9E\u65F6\u91CD\u65B0\u52A0\u8F7D</span>
      <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token string">&#39;./index.html&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u542F\u52A8\u65F6\u9ED8\u8BA4\u6D4F\u89C8\u5668\u6253\u5F00\u7684\u6587\u4EF6</span>
      <span class="token literal-property property">directoryListing</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;./&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">proxies</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token string">&#39;/api&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;http://www.your.com&#39;</span> <span class="token comment">// \u4EE3\u7406\u7684\u57DF\u540D</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// gulp4.0</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;default&#39;</span><span class="token punctuation">,</span> gulp<span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;webserver&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;gulp webserver start successfully at localhost:8888&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u56E0\u4E3Agulp\u5347\u7EA7\u5230\u4E864.0\uFF0C\u6240\u4EE5\u4F7F\u7528gulp.series\u6765\u542F\u52A8\uFF0C\u5982\u679C\u4F7F\u7528\u7684\u662Fgulp3.*\u7684\u8BDD\u8BF7\u5C06\u4E0A\u9762\u7684\u4EE3\u7801\u66FF\u6362\u4E3A\u4E0B\u9762\u7684</span>
<span class="token comment">// gulp 3.*</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;default&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;webserver&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;gulp webserver start successfully at localhost:8888&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>`,13),c=[o];function e(u,l,i,k,r,g){return a(),s("div",null,c)}var f=n(t,[["render",e]]);export{m as __pageData,f as default};
