<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>引入第三方包 | Derlin Blog</title>
    <meta name="description" content="记录个人技术收获, 博客界面追求极简">
    <link rel="stylesheet" href="/assets/style.b789de2a.css">
    <link rel="modulepreload" href="/assets/app.d4eb32af.js">
    <link rel="modulepreload" href="/assets/font-end_小程序_小程序.md.69db3549.lean.js">
    
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
  <script src="https://cdn.wwads.cn/js/makemoney.js" async=""></script>
  <meta name="twitter:title" content="引入第三方包 | Derlin Blog">
  <meta property="og:title" content="引入第三方包 | Derlin Blog">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-40587210><div class="sidebar-button" data-v-40587210><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Derlin Blog, back to home" data-v-40587210 data-v-016a8bd8><img class="logo" src="/logo.svg" alt="Logo" data-v-016a8bd8> Derlin Blog</a><div class="flex-grow" data-v-40587210></div><div class="nav" data-v-40587210><nav class="nav-links" data-v-40587210 data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item active" href="/font-end/" data-v-49fe041d>前端 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/back-end/sql/sql必知必会" data-v-49fe041d>服务端 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/skill/情商技巧.html" data-v-49fe041d>技巧 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/bodybuilding/" data-v-49fe041d>健身 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/photography/" data-v-49fe041d>摄影 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/deliciousFood/index.html" data-v-49fe041d>美食 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>法律</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/law/劳动法.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>劳动法</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/thinking/个人想法.html" data-v-49fe041d>思考 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>杂学</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/other/杂记.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>杂记</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/other/autojs.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>autojs</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/economics/" data-v-49fe041d>经济学 <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-17c48e2f><nav class="nav-links nav" data-v-17c48e2f data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item active" href="/font-end/" data-v-49fe041d>前端 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/back-end/sql/sql必知必会" data-v-49fe041d>服务端 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/skill/情商技巧.html" data-v-49fe041d>技巧 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/bodybuilding/" data-v-49fe041d>健身 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/photography/" data-v-49fe041d>摄影 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/deliciousFood/index.html" data-v-49fe041d>美食 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>法律</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/law/劳动法.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>劳动法</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/thinking/个人想法.html" data-v-49fe041d>思考 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>杂学</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/other/杂记.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>杂记</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/other/autojs.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>autojs</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/economics/" data-v-49fe041d>经济学 <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-17c48e2f><!--[--><li class="sidebar-link"><p class="sidebar-link-item">css</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/css/index.html">css</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/css/优雅的css.html">优雅的css</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/css/响应式.html">响应式</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/css/栅格布局.html">栅格布局</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/css/过度.html">过度</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">echarts</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/echarts/index.html">echarts</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">git</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/git/index.html">git</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">jquery</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/jquery/index.html">jquery</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">js</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/js/index.html">js</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">js高级</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/js高级/index.html">js高级</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">linux</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/linux/index.html">linux</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">node</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/node/index.html">node</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">python</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/python/index.html">python</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">react</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/react/index.html">react</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">sass</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/sass/index.html">sass</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">svg</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/svg/index.html">svg</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">threejs</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/threejs/index.html">threejs</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">ts</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/ts/index.html">ts</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">utils</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/utils/index.html">utils</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">vue3</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/vue3/index.html">vue3</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/vue3/vue3实战.html">vue3实战</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/vue3/vue原理.html">vue原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/vue3/初尝vue3.html">初尝vue3</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">小程序</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/font-end/小程序/小程序.html">小程序</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#引入第三方包">引入第三方包</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#微信小程序支持-echarts-微信小程序加载-echarts-引入-echarts">微信小程序支持 echarts, 微信小程序加载 echarts 引入 echarts</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#引用-vant-weapp">引用 vant weapp</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#组件">组件</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#组件创建">组件创建</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#发送事件">发送事件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#组件监听事件">组件监听事件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#传值">传值</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#小程序属性想要获取绑定后的值">小程序属性想要获取绑定后的值</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#指令用法">指令用法</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#循环">循环</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#显示">显示</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#生命周期">生命周期</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#app-生命周期">app 生命周期</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#页面生命周期">页面生命周期</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#刷新">刷新</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#上拉刷新">上拉刷新</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#下拉刷新">下拉刷新</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#顶部-navigation-自定义">顶部 navigation 自定义</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#图片上传">图片上传</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#跳转">跳转</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#共享数据">共享数据</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#状态管理工具">状态管理工具</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setdata">setData</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#存储数据">存储数据</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#微信支付">微信支付</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#其余需要注意部分">其余需要注意部分</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#获取系统参数">获取系统参数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#获取某个-dom">获取某个 DOM</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#插槽实现默认插入值">插槽实现默认插入值</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#引入-script-脚本">引入 script 脚本</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#watch-使用">watch 使用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#类似-filter-解决方案">类似 filter 解决方案</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#微信复制">微信复制</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#返回上一页面并传参">返回上一页面并传参</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#事件穿透-事件冒泡将-bindtap-改为-catchtap">事件穿透, 事件冒泡将 bindtap 改为 catchtap</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#关于微信小程序报错-微信小程序-cannot-read-property-mark-of-undefined-由于没有打开扩展不支持-async">关于微信小程序报错 微信小程序 Cannot read property &#39;mark&#39; of undefined 由于没有打开扩展不支持 async</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#注意在-less-中如果使用-calc-的时候，-编译会出问题，所以需要原样输出">注意在 less 中如果使用 calc 的时候， 编译会出问题，所以需要原样输出</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#不能用-background">不能用 background</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#图片预览有专门的方法">图片预览有专门的方法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#导入样式">导入样式</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#长按文字复制">长按文字复制</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#swiper-会有一个默认高度-不会由内容自动撑开">swiper 会有一个默认高度, 不会由内容自动撑开</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/小程序/小程序开发流程.html">小程序开发流程</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/小程序/uni-app.html">uni-app</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">正则</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/正则/index.html">正则</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">构建工具</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/构建工具/gulp/index.html">gulp</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/构建工具/webpack/index.html">webpack</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">优化</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/font-end/优化/index.html">vue优化</a><!----></li></ul></li><!--]--></ul><!--[--><!--[--><div class="sponsors sidebar"><div></div></div><!--]--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h2 id="引入第三方包" tabindex="-1">引入第三方包 <a class="header-anchor" href="#引入第三方包" aria-hidden="true">#</a></h2><h3 id="微信小程序支持-echarts-微信小程序加载-echarts-引入-echarts" tabindex="-1">微信小程序支持 echarts, 微信小程序加载 echarts 引入 echarts <a class="header-anchor" href="#微信小程序支持-echarts-微信小程序加载-echarts-引入-echarts" aria-hidden="true">#</a></h3><p><a href="https://developers.weixin.qq.com/community/develop/doc/00040a3f54c4004a2e66aa2d558406" target="_blank" rel="noopener noreferrer">微信小程序引入</a></p><p><a href="https://github.com/ecomfe/echarts-for-weixin" target="_blank" rel="noopener noreferrer">github 地址</a></p><p>echarts 体积过大的时候, 采用<a href="https://echarts.apache.org/zh/builder.html" target="_blank" rel="noopener noreferrer">压缩</a>, 不要下最新的, 下 5.0 就行了</p><p><a href="https://github.com/ecomfe/echarts-for-weixin/blob/master/pages/lazyLoad/index.js" target="_blank" rel="noopener noreferrer">echarts 刷新功能</a>, 通过调用 setOptions 方法</p><h3 id="引用-vant-weapp" tabindex="-1">引用 vant weapp <a class="header-anchor" href="#引用-vant-weapp" aria-hidden="true">#</a></h3><div class="language-"><pre><code>npm init -y 创建package.json
npm i -s 安装vant
点击详情, 默认使用npm模块
点击工具, 构建npm, 每次安装新的npm包的时候都要构建一下
在.json文件中的, userComponents中注入

</code></pre></div><ul><li>修改 vant 的样式</li></ul><div class="language-"><pre><code>&lt;van-search  backgroun=&quot;#aaa&quot; /&gt;
&lt;!-- 覆盖样式 --&gt;
去页面上面, 选中类名, 然后在wxss里面覆盖掉, 使用 !important

</code></pre></div><h2 id="组件" tabindex="-1">组件 <a class="header-anchor" href="#组件" aria-hidden="true">#</a></h2><h3 id="组件创建" tabindex="-1">组件创建 <a class="header-anchor" href="#组件创建" aria-hidden="true">#</a></h3><p>去 components 中创建一个组件, 会自动生成模板, 组件生命周期和页面的生命周期不相同</p><h3 id="发送事件" tabindex="-1">发送事件 <a class="header-anchor" href="#发送事件" aria-hidden="true">#</a></h3><div class="language-"><pre><code>methods: {
    hadnleRightClick() {
        this.triggerEvent(&quot;click&quot;)
    }
}

bind:click=&quot;handleClick&quot;
</code></pre></div><h3 id="组件监听事件" tabindex="-1">组件监听事件 <a class="header-anchor" href="#组件监听事件" aria-hidden="true">#</a></h3><p><code>this.triggerEvent(&quot;父组件自定义事件的名称&quot;， 要传递的参数)</code></p><div class="language-"><pre><code>&lt;list-item bind:change=&quot;handleChange&quot; &gt;&lt;/list-item&gt;
点击事件 bindtap
</code></pre></div><h3 id="传值" tabindex="-1">传值 <a class="header-anchor" href="#传值" aria-hidden="true">#</a></h3><div class="language-"><pre><code>&lt;child-com count=&quot;{countData}&quot;&gt;

接受
properties: {
    count: {
        type: &quot;&quot;,
        value: &quot;&quot;
    }
}
</code></pre></div><h3 id="小程序属性想要获取绑定后的值" tabindex="-1">小程序属性想要获取绑定后的值 <a class="header-anchor" href="#小程序属性想要获取绑定后的值" aria-hidden="true">#</a></h3><div class="language-"><pre><code>通过 data-jidjj=&quot;&quot; 的形式来获取
const idx = event.target.dataset.idx

</code></pre></div><h2 id="指令用法" tabindex="-1">指令用法 <a class="header-anchor" href="#指令用法" aria-hidden="true">#</a></h2><h3 id="循环" tabindex="-1">循环 <a class="header-anchor" href="#循环" aria-hidden="true">#</a></h3><div class="language-"><pre><code>wx:for=&quot;{{arr}}&quot; key=&quot;*this&quot;
默认有item, index, 对象的时候有差异
</code></pre></div><h3 id="显示" tabindex="-1">显示 <a class="header-anchor" href="#显示" aria-hidden="true">#</a></h3><div class="language-"><pre><code>wx:if = {{true}}
</code></pre></div><h2 id="生命周期" tabindex="-1">生命周期 <a class="header-anchor" href="#生命周期" aria-hidden="true">#</a></h2><h3 id="app-生命周期" tabindex="-1">app 生命周期 <a class="header-anchor" href="#app-生命周期" aria-hidden="true">#</a></h3><p>app.js</p><ul><li>onLaunch 第一次启动的时候触发</li><li>onShow 页面被用户看到 -- 对数据或页面进行重置</li><li>onHide 页面隐藏 -- 暂停或者清除定时器</li><li>onError 应用代码发生报错触发 -- 在应用发生代码报错的时候，收集用户的错误信息，通过异步请求将错误的信息发送后台去</li><li>onPageNotFound 页面找不到 -- 应用第一次启动的时候，如果找不到第一个入口页面才会触发， 只有第一次进不去才会触发</li></ul><h3 id="页面生命周期" tabindex="-1">页面生命周期 <a class="header-anchor" href="#页面生命周期" aria-hidden="true">#</a></h3><ul><li>onLoad</li><li>onShow</li></ul><h2 id="刷新" tabindex="-1">刷新 <a class="header-anchor" href="#刷新" aria-hidden="true">#</a></h2><h3 id="上拉刷新" tabindex="-1">上拉刷新 <a class="header-anchor" href="#上拉刷新" aria-hidden="true">#</a></h3><div class="language-"><pre><code>onReachBottom() {
    // 如果没有更多数据的时候, 应该return掉
}
</code></pre></div><p>一个是 page 自带的下拉触底钩子事件 onReachBottom 能做的只是下拉到底部的时候通知你触底了，一个是 scroll-view 标签自带事件</p><h3 id="下拉刷新" tabindex="-1">下拉刷新 <a class="header-anchor" href="#下拉刷新" aria-hidden="true">#</a></h3><p>json 中配置</p><div class="language-"><pre><code>enablePullDownRefresh: true

onPullDownRefresh() {
    // 加载新数据, 把一些状态还原

    // 停止下拉刷新
    wx.stopPullDownRefresh()
}
</code></pre></div><h2 id="顶部-navigation-自定义" tabindex="-1">顶部 navigation 自定义 <a class="header-anchor" href="#顶部-navigation-自定义" aria-hidden="true">#</a></h2><p>需要去.json 里面开启自定义 &quot;navigationStyle&quot;: &quot;custom&quot; 这样就没有默认的头部, 需要自己写</p><h2 id="图片上传" tabindex="-1">图片上传 <a class="header-anchor" href="#图片上传" aria-hidden="true">#</a></h2><div class="language-"><pre><code>    uploadPhoto() {
        var that = this;
        wx.chooseImage({
            count: 1, // 默认9
            sizeType: [&quot;compressed&quot;], // 可以指定是原图还是压缩图，默认二者都有
            sourceType: [&quot;album&quot;, &quot;camera&quot;], // 可以指定来源是相册还是相机，默认二者都有
            success: function(res) {
                // 返回选定照片的本地文件路径列表，tempFilePath可以作为img标签的src属性显示图片
                var tempFilePaths = res.tempFilePaths;
                upload(that, tempFilePaths);
            },
        });
    },
});

function upload(page, path) {
    wx.showToast({
            icon: &quot;loading&quot;,
            title: &quot;正在上传&quot;,
        }),
        wx.uploadFile({
            url: constant.SERVER_URL + &quot;/FileUploadServlet&quot;,
            filePath: path[0],
            name: &quot;file&quot;,
            header: {
                &quot;Content-Type&quot;: &quot;multipart/form-data&quot;,
            },
            formData: {
                //和服务器约定的token, 一般也可以放在header中
                session_token: wx.getStorageSync(&quot;session_token&quot;),
            },
            success: function(res) {
                console.log(res);
                if (res.statusCode != 200) {
                    wx.showModal({
                        title: &quot;提示&quot;,
                        content: &quot;上传失败&quot;,
                        showCancel: false,
                    });
                    return;
                }
                var data = res.data;
                page.setData({
                    //上传成功修改显示头像
                    src: path[0],
                });
            },
            fail: function(e) {
                console.log(e);
                wx.showModal({
                    title: &quot;提示&quot;,
                    content: &quot;上传失败&quot;,
                    showCancel: false,
                });
            },
            complete: function() {
                wx.hideToast(); //隐藏Toast
            },
        });
}
</code></pre></div><h2 id="跳转" tabindex="-1">跳转 <a class="header-anchor" href="#跳转" aria-hidden="true">#</a></h2><div class="language-"><pre><code>wx.navigateTo({
    url: &quot;/djfid/df?id=344&quot;
})

// 获取跳转过来的id
onLoad(params) {
    console.log(params.id)
}

// tab切换跳转
wx.switchTab({
    url: &#39;/page/page&#39;
})
</code></pre></div><h2 id="共享数据" tabindex="-1">共享数据 <a class="header-anchor" href="#共享数据" aria-hidden="true">#</a></h2><p>app.js 中共享, 但是数据不是响应式的</p><ol><li>mitt 事件总线库, 只会发和接数据, 不能存储共享数据</li></ol><p>小程序解决方案</p><ol><li>放到 app.js 中的 global, 数据不是响应式的</li></ol><h2 id="状态管理工具" tabindex="-1">状态管理工具 <a class="header-anchor" href="#状态管理工具" aria-hidden="true">#</a></h2><p>文档 <a href="https://gitee.com/ElenaK/hy-event-store" target="_blank" rel="noopener noreferrer">https://gitee.com/ElenaK/hy-event-store</a></p><p>安装 <code>npm i hy-event-store</code> TJ</p><div class="language-"><pre><code>import { HYEventStore } from &#39;hy-event-store&#39;

const eventStore = new HYEventStore({
  state: {
    upRanking: {},
  },
  actions: {
    getRankingsAction(ctx) {},
  }
})

export default eventStore

// 使用方法
eventStore.setState(&quot;playIndex&quot;, index) // 设置state中的值
eventStore.onState(&quot;hotRanking&quot;, this.hotRankingHanlder) // 监听state中的值, 并且触发某些方法

eventStore.dispatch(&quot;getRankingsAction&quot;) // 触发action
eventStore.offState(&quot;hotRanking&quot;, this.hotRankingHanlder) // 卸掉监听

</code></pre></div><h2 id="setdata" tabindex="-1">setData <a class="header-anchor" href="#setdata" aria-hidden="true">#</a></h2><p>setData 是同步的, 但是对页面进行渲染的过程是异步的 react 在大部分情况下, setState 是异步的, 为了保证 data 里面的数据始终和页面以及组件中的数据保持一致</p><h2 id="存储数据" tabindex="-1">存储数据 <a class="header-anchor" href="#存储数据" aria-hidden="true">#</a></h2><div class="language-"><pre><code>1. 通过本地存储

const logs = wx.getStorageSync(&#39;logs&#39;)
wx.setStorageSync(&#39;logs&#39;, logs)

2. 通过app.js中的 globalData 存储

globalData: {}
</code></pre></div><h2 id="微信支付" tabindex="-1">微信支付 <a class="header-anchor" href="#微信支付" aria-hidden="true">#</a></h2><ol><li><p>创建订单</p><ul><li><p>先获取用户登录成功后的 token 值 -- 调用后端接口 前四个参数通过 button 的 open-type 中获取， 最后一个通过 wx.login 获取，跳转页面，点击按钮获取想要信息</p><p><img src="https://s2.loli.net/2022/06/06/NGfZ4MOb2qAQ1wa.png" alt=""></p></li></ul><ol><li><p>调用获取用户信息按钮， 拿到前四个参数</p><p><img src="https://s2.loli.net/2022/06/06/hkZNFqSCiEBryuo.png" alt=""></p></li><li><p>调用登录接口获取信息</p><p><img src="https://s2.loli.net/2022/06/06/jArPg7yE6KhJL2b.png" alt=""></p></li><li><p>封装优化回调</p><p><img src="https://s2.loli.net/2022/06/06/bpP71NxQEC4T5zW.png" alt=""></p><p>优化后的代码</p><p><img src="https://s2.loli.net/2022/06/06/cDPaCnL6rAEyZRh.png" alt=""></p><p>完整步骤</p><p><img src="https://s2.loli.net/2022/06/06/MY37I6bqeSlsKWc.png" alt=""></p><p>调用后台接口拿到订单编号</p></li></ol></li><li><p>预支付 接口</p><p><img src="https://s2.loli.net/2022/06/06/ZXsB9ErYALPxoRU.png" alt=""></p></li><li><p>返回数据</p><p><img src="https://s2.loli.net/2022/06/06/IAczML2gt7reyR3.png" alt=""></p></li><li><p>调用微信内支付，上面的数据用于这一步的参数</p><p><img src="https://s2.loli.net/2022/06/06/FpBlUImtgh56QxL.png" alt=""></p></li><li><p>发起微信支付 返回支付成功或者失败</p></li><li><p>查询订单 调用接口，看看后台是否真的成功了，跳转到订单页面</p></li></ol><h2 id="其余需要注意部分" tabindex="-1">其余需要注意部分 <a class="header-anchor" href="#其余需要注意部分" aria-hidden="true">#</a></h2><h3 id="获取系统参数" tabindex="-1">获取系统参数 <a class="header-anchor" href="#获取系统参数" aria-hidden="true">#</a></h3><div class="language-"><pre><code>wx.getSystemInfoSync();
</code></pre></div><h3 id="获取某个-dom" tabindex="-1">获取某个 DOM <a class="header-anchor" href="#获取某个-dom" aria-hidden="true">#</a></h3><div class="language-"><pre><code>const query = wx.createSelectQuery();
query.select(&#39;.swiper-image&#39;).boundingClientReact();
</code></pre></div><h3 id="插槽实现默认插入值" tabindex="-1">插槽实现默认插入值 <a class="header-anchor" href="#插槽实现默认插入值" aria-hidden="true">#</a></h3><div class="language-"><pre><code>插槽不能默认值
实现方案: 通过一个伪类选择器
&lt;view class=&quot;slot&quot;&gt;
    &lt;slot&gt;&lt;/slot&gt;
&lt;/view&gt;
&lt;view class=&quot;default&quot;&gt;
    &lt;text&gt;rightText3&lt;/text&gt;
&lt;/view&gt;
.header .slot:empty + .default {
    display: block;
    // 当里面为空的时候进行一些处理
}
.header .default {
    display: none;
}
</code></pre></div><h3 id="引入-script-脚本" tabindex="-1">引入 script 脚本 <a class="header-anchor" href="#引入-script-脚本" aria-hidden="true">#</a></h3><p>we-script</p><h3 id="watch-使用" tabindex="-1">watch 使用 <a class="header-anchor" href="#watch-使用" aria-hidden="true">#</a></h3><p>页面需要单独注入 <a href="https://www.jianshu.com/p/34c2403a7a1c" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/34c2403a7a1c</a></p><p>组件中集成得有 <a href="https://blog.csdn.net/m0_63466615/article/details/123344136" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/m0_63466615/article/details/123344136</a></p><div class="language-"><pre><code>// 只有组件里面才能监听
observers: {
&#39;popShow&#39;: function(val) {}
},
</code></pre></div><p>封装 base-echarts</p><h3 id="类似-filter-解决方案" tabindex="-1">类似 filter 解决方案 <a class="header-anchor" href="#类似-filter-解决方案" aria-hidden="true">#</a></h3><p>通过 wxs 不支持 es6 语法</p><div class="language-"><pre><code>&lt;!-- wxs --&gt;
&lt;!-- 比如保留两位小数 --&gt;
&lt;!-- utils/format.wxs --&gt;

function parseNum(val) {
    var value =  val+&quot;&quot;
    return value.toFix(2)
}
module.exports = {
    parseNum: parseNum
}
</code></pre></div><p>使用</p><div class="language-"><pre><code>&lt;wxs src=&quot;../../utils/format.wxs&quot; module=&quot;format&quot;&gt;&lt;/wxs&gt;

&lt;view&gt;
    {{format.parseNum(&#39;343.34343&#39;)}}
&lt;/view&gt;
</code></pre></div><h3 id="微信复制" tabindex="-1">微信复制 <a class="header-anchor" href="#微信复制" aria-hidden="true">#</a></h3><div class="language-js"><pre><code>  <span class="token comment">/**
   * 复制
   */</span>
  <span class="token function">copyText</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      wx<span class="token punctuation">.</span><span class="token function">setClipboardData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">data</span><span class="token operator">:</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
          <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;success -&gt; res&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="返回上一页面并传参" tabindex="-1">返回上一页面并传参 <a class="header-anchor" href="#返回上一页面并传参" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token comment">// 直接调用它返回即可</span>
<span class="token function">_returnToPreviousPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pages <span class="token operator">=</span> <span class="token function">getCurrentPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> prevPage <span class="token operator">=</span> pages<span class="token punctuation">[</span>pages<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prevPage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        prevPage<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">isRresh</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="事件穿透-事件冒泡将-bindtap-改为-catchtap" tabindex="-1">事件穿透, 事件冒泡将 bindtap 改为 catchtap <a class="header-anchor" href="#事件穿透-事件冒泡将-bindtap-改为-catchtap" aria-hidden="true">#</a></h3><h3 id="关于微信小程序报错-微信小程序-cannot-read-property-mark-of-undefined-由于没有打开扩展不支持-async" tabindex="-1">关于微信小程序报错 微信小程序 Cannot read property &#39;mark&#39; of undefined 由于没有打开扩展不支持 async <a class="header-anchor" href="#关于微信小程序报错-微信小程序-cannot-read-property-mark-of-undefined-由于没有打开扩展不支持-async" aria-hidden="true">#</a></h3><h3 id="注意在-less-中如果使用-calc-的时候，-编译会出问题，所以需要原样输出" tabindex="-1">注意在 less 中如果使用 calc 的时候， 编译会出问题，所以需要原样输出 <a class="header-anchor" href="#注意在-less-中如果使用-calc-的时候，-编译会出问题，所以需要原样输出" aria-hidden="true">#</a></h3><h3 id="不能用-background" tabindex="-1">不能用 background <a class="header-anchor" href="#不能用-background" aria-hidden="true">#</a></h3><p>所有与图片相关的都用 image image 用几种用法:</p><ul><li>aspectFill</li><li>aspectFit</li><li>scaleToFill</li><li>widthFix</li></ul><h3 id="图片预览有专门的方法" tabindex="-1">图片预览有专门的方法 <a class="header-anchor" href="#图片预览有专门的方法" aria-hidden="true">#</a></h3><p><code>wx.previewImage</code></p><h3 id="导入样式" tabindex="-1">导入样式 <a class="header-anchor" href="#导入样式" aria-hidden="true">#</a></h3><ol><li>只能用 @import</li><li>只能使用相对路径</li></ol><h3 id="长按文字复制" tabindex="-1">长按文字复制 <a class="header-anchor" href="#长按文字复制" aria-hidden="true">#</a></h3><p>只能通过 text 标签, 并且 user-select 属性设置为 true</p><h3 id="swiper-会有一个默认高度-不会由内容自动撑开" tabindex="-1">swiper 会有一个默认高度, 不会由内容自动撑开 <a class="header-anchor" href="#swiper-会有一个默认高度-不会由内容自动撑开" aria-hidden="true">#</a></h3></div></div><footer class="page-footer" data-v-8fcebc32 data-v-b65b4b36><div class="edit" data-v-b65b4b36><div class="edit-link" data-v-b65b4b36 data-v-55695e90><!----></div></div><div class="updated" data-v-b65b4b36><!----></div></footer><div class="next-and-prev-link" data-v-8fcebc32 data-v-e65a9748><div class="container" data-v-e65a9748><div class="prev" data-v-e65a9748><a class="link" href="/font-end/vue3/初尝vue3" data-v-e65a9748><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-e65a9748><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-e65a9748>初尝vue3</span></a></div><div class="next" data-v-e65a9748><a class="link" href="/font-end/小程序/小程序开发流程" data-v-e65a9748><span class="text" data-v-e65a9748>小程序开发流程</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-e65a9748><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"readme.md\":\"d659ba14\",\"back-end_java_index-冲突-爱穿西装的古惑仔_win10.md\":\"3842fc24\",\"back-end_java_index.md\":\"4f0e1831\",\"back-end_sql_sql必知必会.md\":\"e617f580\",\"blog_announcing-vite2.md\":\"25a3f068\",\"bodybuilding_index.md\":\"363930c9\",\"deliciousfood_index.md\":\"34c5154c\",\"economics_index.md\":\"93f2a852\",\"font-end_auto.js_index.md\":\"99fb5815\",\"font-end_css_css设计.md\":\"192bf22e\",\"font-end_css_index.md\":\"b6c99c05\",\"font-end_css_优雅的css.md\":\"77c7ebcc\",\"font-end_css_响应式.md\":\"536c0882\",\"font-end_css_栅格布局.md\":\"84c11d93\",\"font-end_css_过度.md\":\"d6311bea\",\"font-end_echarts_index copy.md\":\"abdc820f\",\"font-end_echarts_index.md\":\"ad68dcaa\",\"font-end_git_index.md\":\"5f2ab9b9\",\"font-end_index.md\":\"fddd7e5d\",\"font-end_jquery_index.md\":\"b26ef32f\",\"font-end_js_index.md\":\"32daf0a9\",\"font-end_js_破解javascript高级玩法.md\":\"8850f3d6\",\"font-end_js高级_es6.md\":\"de87547d\",\"font-end_js高级_index.md\":\"d64855ca\",\"font-end_linux_index.md\":\"74152c77\",\"font-end_node_index.md\":\"41c6d4bc\",\"font-end_python_index.md\":\"550ee078\",\"font-end_react_index.md\":\"b167a3a8\",\"font-end_sass_index.md\":\"82289ab8\",\"font-end_svg_index.md\":\"2daaca83\",\"font-end_threejs_index.md\":\"e4e717f1\",\"font-end_ts_index.md\":\"f08ffda6\",\"font-end_utils_index.md\":\"0467bfe4\",\"font-end_vue3_index.md\":\"4d7a40b6\",\"font-end_vue3_vue3实战.md\":\"ca2bccf3\",\"font-end_vue3_vue原理.md\":\"eb98db92\",\"font-end_vue3_初尝vue3.md\":\"f113630d\",\"font-end_优化_index.md\":\"0c98e076\",\"font-end_大屏可视化_index.md\":\"68d10129\",\"font-end_小程序_uni-app.md\":\"5a38f0c6\",\"font-end_小程序_小程序.md\":\"69db3549\",\"font-end_小程序_小程序开发流程.md\":\"6d19bfb3\",\"font-end_构建工具_gulp_gulp案例.md\":\"7779baca\",\"font-end_构建工具_gulp_index.md\":\"3d645f7c\",\"font-end_构建工具_webpack_index.md\":\"a141d95d\",\"font-end_正则_index.md\":\"842b2d36\",\"font-end_流程设计_流程设计.md\":\"ff288d25\",\"font-end_源码所获_index.md\":\"8cc67ba1\",\"index.md\":\"df9a98ec\",\"informal-essay_index.md\":\"b425145d\",\"law_劳动法.md\":\"8d1423dc\",\"other_autojs.md\":\"1b19e0f8\",\"other_杂记.md\":\"040b75f8\",\"photography_index.md\":\"358c46aa\",\"photography_后期-冲突-爱穿西装的古惑仔_win10.md\":\"a9edfe80\",\"photography_后期.md\":\"dd0f2f2e\",\"photography_拍摄技巧.md\":\"0ea67eee\",\"photography_摄影.md\":\"549e67ec\",\"plan_index.md\":\"6cf9d1dd\",\"skill_vscode.md\":\"8f699b53\",\"skill_学习方法.md\":\"5d07d800\",\"skill_情商技巧.md\":\"b89be193\",\"skill_炒肉技巧.md\":\"3be83e25\",\"skill_精致男.md\":\"6b98ab71\",\"skill_购物.md\":\"712873f0\",\"thinking_index.md\":\"1d1d92fa\",\"thinking_个人想法.md\":\"77af7805\"}")</script>
    <script type="module" async src="/assets/app.d4eb32af.js"></script>
    
  </body>
</html>